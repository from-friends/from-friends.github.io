<!doctypehtml><html lang="en"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>fx(tez) for fx(hash) - How much is your fxhash.xyz Tezos portfolio worth?</title><script src="qrcode.min.js"></script><script src="html2canvas.min.js"></script><link rel="icon"type="image/png"href="favicon-96x96.png"sizes="96x96"><link rel="icon"type="image/svg+xml"href="favicon.svg"><link rel="shortcut icon"href="favicon.ico"><meta name="description"content="fx(tez) lets you instantly check stats of your fxhash Tezos collection. Try now for free!"><meta name="keywords"content="fxhash, tezos, nft, portfolio, valuation, floor price, crypto, blockchain, art"><meta property="og:type"content="website"><meta property="og:url"content="https://from-friends.github.io/fxtez.html"><meta property="og:title"content="↗ Your fx(hash) tezos collection stats"><meta property="og:description"content="fx(tez) lets you instantly check stats of your fxhash tezos collection. Try now for free!"><meta property="og:image"content="social-sharing_fxtez.png"><meta name="twitter:card"content="summary_large_image"><meta property="twitter:domain"content="from-friends.github.io"><meta property="twitter:url"content="https://from-friends.github.io/fxtez.html"><meta name="twitter:title"content="↗ Your fx(hash) tezos collection stats"><meta name="twitter:description"content="fx(tez) lets you instantly check stats of your fxhash tezos collection. Try now for free!"><meta name="twitter:image"content="social-sharing_fxtez.png"><style>body{background-color:#121212;color:#e0e0e0;font-family:sans-serif;margin:0;padding:20px;padding-top:80px;display:flex;flex-direction:column;align-items:center}.toolbar{background-color:#121212;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;position:fixed;top:0;left:0;width:100%;z-index:1100;box-sizing:border-box}.toolbar-logo img{height:40px;width:auto;display:block}.logo-text{font-size:28px;font-weight:700;color:#e0e0e0}.donate-button{width:100px;padding:10px 0;text-align:center;border-radius:8px;border:none;background-color:#ff0476;color:#121212;cursor:pointer;font-weight:700;font-size:.95em;text-decoration:none}.donate-button:not(:disabled):hover{background-color:#ff0475f3}h1{color:#ff0476}.input-section{display:flex;flex-direction:column;align-items:center;width:100%;max-width:400px;margin-bottom:20px}.input-section h1{color:#ff0476;font-size:1.8em;text-align:center;margin-bottom:15px}input#addressInput{padding:12px;margin-bottom:8px;border-radius:8px;border:1px solid #333;background-color:#1e1e1e;color:#e0e0e0;width:100%;box-sizing:border-box;font-size:1em}button{padding:12px 20px;border-radius:8px;border:none;background-color:#ff0476;color:#121212;cursor:pointer;font-weight:700;width:90%;box-sizing:border-box;font-size:1.1em}.input-section button#fetchButton{width:100%;margin-bottom:15px}button:disabled{background-color:#555;color:#aaa;cursor:not-allowed}#fetchButton.loading-state{display:flex;align-items:center;justify-content:center;padding-top:12px;padding-bottom:12px}#fetchButton.loading-state .spinner{width:20px;height:20px;border-width:3px;margin:0 10px 0 0}button:not(:disabled):hover{background-color:#ff0475f3}table{width:90%;margin-top:20px;border-collapse:collapse;background-color:#121212}td,th{border:1px solid #333;padding:12px;text-align:left;vertical-align:middle}th{background-color:#333;color:#ff0476}td img{max-width:80px;max-height:80px;border-radius:4px;display:block}#groupedFxhashTable a{color:#ff80bf;text-decoration:none}#groupedFxhashTable a:hover{text-decoration:underline}.error,.loading{margin-top:15px;font-size:1.1em}.error{color:#cf6679}.loading{color:#03dac6}#prominentTotalValueDisplay{font-size:1.6em;font-weight:700;color:#ff0476;text-align:center;margin-top:20px;margin-bottom:15px;padding:10px;background-color:#1e1e1e;border-radius:5px;width:80%;max-width:600px}.action-buttons-container{display:flex;justify-content:center;gap:10px;margin-top:20px;margin-bottom:20px;width:100%;max-width:460px}.action-buttons-container button{flex:1;padding:10px 20px;font-weight:700;border-radius:8px;cursor:pointer;font-size:1.1em;box-sizing:border-box;border:2px solid #ff0476;line-height:1.5}#shareButton{background-color:#ff0476;color:#121212}#shareButton:hover{background-color:#ff0475f3}.outline-button{background-color:transparent;color:#ff0476;transition:background-color .2s,color .2s}.outline-button:hover{background-color:#ff0476;color:#121212}.modal{display:none;position:fixed;z-index:1500;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.6);padding-top:60px}.modal-content{background-color:#2a2a2a;margin:5% auto;padding:20px;border:1px solid #555;width:80%;max-width:450px;border-radius:8px;position:relative;text-align:center}.close-modal-button{color:#aaa;float:right;font-size:28px;font-weight:700;position:absolute;top:10px;right:20px}.close-modal-button:focus,.close-modal-button:hover{color:#fff;text-decoration:none;cursor:pointer}#shareCanvasPreview{width:300px;height:300px;border:1px solid #555;margin:20px auto;background-color:#333}#shareCardTitle{font-size:1.5em}#shareCardValue{font-size:1.8em;font-weight:700;margin-bottom:20px;color:#03dac6}#shareCardLink{font-size:1em;color:#ff80bf}#shareCardLink a{color:#ff80bf;text-decoration:underline}.modal-buttons button{padding:10px 15px;margin:10px 5px;font-weight:700;border-radius:5px;cursor:pointer;border:none}#modalShareButton{background-color:#ff0476;color:#121212}#modalDownloadButton{background-color:#03dac6;color:#121212}.logo{position:absolute;top:20px;left:20px;width:100px;height:auto}.loading-overlay{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:rgba(18,18,18,.85);justify-content:center;align-items:center;text-align:center;color:#e0e0e0;font-size:1.3em;flex-direction:column}.loading-overlay-content{padding:20px}.spinner{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #ff0476;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 10px auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.footer{background-color:#121212;color:#e0e0e0;padding:30px 20px;margin-top:40px;border-top:1px solid #333;display:flex;flex-direction:column;align-items:center;font-family:sans-serif}.footer-image{width:120px;height:auto;margin-bottom:25px}.footer-sections{display:flex;justify-content:space-around;width:100%;max-width:700px;flex-wrap:wrap}.footer-section{margin:15px;text-align:left;min-width:200px}.footer-section h3{color:#aaa;font-size:1.2em;margin-bottom:15px}.footer-links{list-style:none;padding:0;margin:0}.footer-links li{margin-bottom:8px}.footer-links li a{color:#aaa;text-decoration:none;font-size:.95em}.footer-links li a:hover{text-decoration:underline}.x-follow-btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;background-color:#121212;color:#fff;border:none;border-radius:8px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none;box-shadow:0 0 0 2px #888,0 2px 5px rgba(0,0,0,.1);margin-top:15px}.x-follow-btn:hover{background-color:#222;transform:translateY(-1px);box-shadow:0 0 0 2px #888,0 4px 8px rgba(0,0,0,.15)}.x-follow-btn:active{transform:translateY(0);box-shadow:0 0 0 2px #888,0 2px 3px rgba(0,0,0,.1)}.x-follow-btn::before{content:"";display:inline-block;width:20px;height:20px;margin-right:10px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z'/%3E%3C/svg%3E");background-size:contain;background-repeat:no-repeat}.widget-container{width:460px;max-width:100%}.balance-card{background-color:#121212;color:#fff;padding:25px 20px;border-radius:10px;margin-bottom:5px}.balance-card .balance-title{font-size:18px;opacity:.8;margin-bottom:4px}.balance-card .balance-amount{font-size:38px;font-weight:700;margin-bottom:1px;letter-spacing:-.5px}.categories-section{background-color:#121212;border-radius:5px;padding:5px}.category-row{display:flex;justify-content:space-between;gap:15px}.category-row:not(:last-child){margin-bottom:15px}.category-box{background-color:#121212;border:none;border-radius:8px;padding:15px;flex:1;min-width:0;text-align:left}.category-box .category-amount{font-size:17px;font-weight:700;color:#f0f0f0;margin-bottom:4px}.category-box .category-label{font-size:11px;color:#aaa}.separator-line{border:none;height:1px;background-color:#444;margin:10px 0}@keyframes skeleton-loading{0%{background-position:-200px 0}100%{background-position:calc(200px + 100%) 0}}.skeleton{animation:skeleton-loading 1.5s infinite linear;background-color:#121212;background-image:linear-gradient(90deg,#121212,#2c2c2c,#121212);background-size:200px 100%;background-repeat:no-repeat;color:transparent!important;border-radius:4px;display:block}#donateModal{align-items:center;justify-content:center;padding-top:0}#donateModal .modal-content{background-color:#121212;margin:0;padding:20px;border:2px solid #444;width:90%;max-width:380px;border-radius:8px;position:relative;text-align:center}.close-donate-modal-button{color:#aaa;font-size:32px;font-weight:400;position:absolute;top:5px;right:5px;background-color:transparent;border:none;padding:10px;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;line-height:1;cursor:pointer;transition:background-color .2s,color .2s}.close-donate-modal-button:focus,.close-donate-modal-button:hover{color:#fff;background-color:rgba(255,255,255,.15);text-decoration:none}#donateModal .widget-container{width:100%}#donateModal .balance-card{background-color:#121212;color:#fff;padding:25px 20px;border-radius:10px;margin-bottom:5px}#donateModal .balance-title{font-size:18px;opacity:.8;margin-bottom:4px}#donateModal .actions-container{display:flex;gap:12px}#donateModal .action-button{flex:1;background-color:#fff;color:#121212;border:none;padding:12px 10px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease}#donateModal .action-button:hover{background-color:#f0f0f0}#donateModal .profile-card{background-color:#121212;border-radius:10px;padding:15px;display:flex;align-items:center}#donateModal .profile-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:15px;border:1px solid #333}#donateModal .profile-info-text{text-align:left;flex-grow:1}#donateModal .profile-username{font-size:15px;font-weight:600;color:#e0e0e0;margin-bottom:2px}#donateModal .profile-address{font-size:11px;color:#aaa}#donateModal .qr-code-container{margin-top:20px;margin-bottom:20px;padding:10px;background-color:#121212;border-radius:8px;display:inline-block}#donateModal #qrcode img{display:block;margin:auto;border:none;border-radius:4px}#donateModal .action-button-grey-outline{flex:1;background-color:transparent;border:2px solid #555;color:#aaa;padding:12px 10px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;text-decoration:none;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease,color .2s ease,border-color .2s ease}#donateModal .action-button-grey-outline:focus,#donateModal .action-button-grey-outline:hover{background-color:#555;color:#fff;border-color:#555}#donateModal .footer-content{text-align:center;margin-bottom:20px}#donateModal .footer-content p{font-size:14px;color:#aaa;margin-top:0;margin-bottom:0}.demo-link{font-size:.9em;color:#aaa;text-decoration:underline;cursor:pointer;background:0 0;border:none;padding:0}.demo-link:hover{color:#e0e0e0}</style><script defer="defer"src="https://cloud.umami.is/script.js"data-website-id="77f26836-27dd-4d25-b9b0-dcf4cdf4b2b7"></script><header class="toolbar"><a href="https://from-friends.github.io/fxhash.html"rel="noopener noreferrer"class="toolbar-logo"style="text-decoration:none"><span class="logo-text">fx(tez)</span> </a><button class="donate-button">Donate</button></header><a href="https://from-friends.github.io/"target="_blank"rel="noopener noreferrer"class="logo"><img src="fromfriends.svg"alt="fromfriends logo"style="display:block;width:100%;height:auto"></a><div id="loadingOverlayModal"class="loading-overlay"><div class="spinner"></div><div id="loadingOverlayText"class="loading-overlay-content">Loading...</div><p style="margin-top:10px;margin-bottom:0;font-size:.9em">Follow us on X while the data loads:</p><a href="https://x.com/FromFriends__"class="x-follow-btn"target="_blank"rel="noopener noreferrer">Follow us on X @FromFriends__</a></div><div class="input-section"><h1>How much is your fx(hash) tezos collection worth?</h1><input id="addressInput"placeholder="Enter Tezos address (tz... or .tez)"value=""> <button id="fetchButton">Check now</button> <a href="#"id="demoLink"class="demo-link">Try a demo</a></div><div id="skeletonLoader"style="display:none;margin-top:10px"><div class="widget-container"><div class="balance-card"><div class="balance-title"><strong>fx(tez)</strong> ×</div><div class="balance-amount"id="resultsTotalValue"><div class="skeleton"style="width:200px;height:38px;border-radius:4px"></div></div><div class="category-label">Total Floor Value</div></div><div class="categories-section"><div class="category-row"><div class="category-box"><div class="category-amount"id="resultsCollectedIterations"><div class="skeleton"style="width:60px;height:17px;border-radius:3px"></div></div><div class="category-label">Collected Iterations</div></div><div class="category-box"><div class="category-amount"id="resultsTopArtist"><div class="skeleton"style="width:120px;height:17px;border-radius:3px"></div></div><div class="category-label">#1 Artist</div></div></div><div class="category-row"><div class="category-box"><div class="category-amount"id="resultsUniqueArtists"><div class="skeleton"style="width:50px;height:17px;border-radius:3px"></div></div><div class="category-label">Unique Artists</div></div><div class="category-box"><div class="category-amount"id="resultsMostValuable"><div class="skeleton"style="width:100px;height:17px;border-radius:3px"></div></div><div class="category-label">Most Valuable Iteration</div></div></div></div></div><div id="prominentTotalValueDisplay"style="display:none"></div><div class="action-buttons-container"><button id="shareButton"style="display:none">Share on 𝕏</button> <button id="downloadStatsButton"class="outline-button"style="display:none">Download as Image</button></div></div><div style="margin-top:15px;margin-bottom:10px;display:none"><input type="checkbox"id="toggleThumbnailsCheckbox"checked="checked"> <label for="toggleThumbnailsCheckbox">Hide Thumbnails</label></div><div id="statusMessage"class="loading"style="display:none">Loading...</div><div id="errorMessage"class="error"style="display:none"></div><table id="artworksTable"style="display:none"><thead><tr><th>ID<th>Title<th>Contract<th>Image<th>ID<tbody id="artworksTableBody"></table><div id="groupedFxhashStatusMessage"class="loading"style="display:none;margin-top:20px"></div><div id="fxhashTokenCountDisplay"style="margin-top:10px;margin-bottom:5px;font-weight:700;text-align:center"></div><table id="groupedFxhashTable"style="display:none;margin-top:20px"><thead><tr><th>ID<th>Floor Price<th>Artist<th>Thumbnail<th>Title<th>Token<th>Contract<tbody id="groupedFxhashTableBody"><tfoot id="groupedFxhashTableFooter"></table><div id="endOfPageDonateSection"style="display:none;margin-top:40px;text-align:center"><p style="color:#aaa;margin-bottom:15px;font-size:1.1em">Enjoying this tool? Show your support.</p><button class="donate-button"style="width:150px;padding:12px 20px">Donate</button></div><div id="sharePreviewModal"class="modal"><div class="modal-content"><span class="close-modal-button">&times;</span><h2>Share Your Valuation</h2><canvas id="shareCanvasPreview"></canvas><p style="font-size:.9em;color:#aaa">Note: This is a visual preview. Sharing will attempt to use the image; downloading provides the image.<div class="modal-buttons"><button id="modalShareButton">Share Image</button> <button id="modalDownloadButton">Download Image</button></div></div></div><div id="donateModal"class="modal"><div class="modal-content"><span class="close-donate-modal-button">&times;</span><div class="widget-container"><div class="balance-title"style="text-align:center;margin-bottom:15px"><strong>DONATE</strong></div><div class="footer-content"><p>Many thanks for your support! 🫶</div><div class="profile-card"style="margin-top:15px"><img src="avatar-placeholder.jpg"alt="Donation Avatar"class="profile-avatar"><div class="profile-info-text"><div class="profile-username">fromfriends.tez</div><div class="profile-address"id="tezosAddressValue">tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5</div></div></div><div class="balance-card"><div class="actions-container"style="margin-top:-20px;display:flex;gap:10px"><button type="button"id="copyAddressBtn"class="action-button">Copy Address</button> <a href="https://kukai.app"target="_blank"rel="noopener noreferrer"class="action-button-grey-outline">Open Kukai Wallet</a></div><div style="text-align:center;margin-top:40px"><p style="font-size:.9em;color:#aaa;margin-bottom:8px">Scan the FromFriends Tezos address<div class="qr-code-container"style="margin-top:0;margin-bottom:10px"><div id="qrcode"></div></div></div></div><hr class="separator-line"></div></div></div><script>let ownedLoading=!1,ownedError=null,ownedItems=[],showThumbnails=!0,addressInput=document.getElementById("addressInput"),demoLink=document.getElementById("demoLink"),fetchButton=document.getElementById("fetchButton"),artworksTable=document.getElementById("artworksTable"),artworksTableBody=document.getElementById("artworksTableBody"),statusMessage=document.getElementById("statusMessage"),errorMessage=document.getElementById("errorMessage"),toggleThumbnailsCheckbox=document.getElementById("toggleThumbnailsCheckbox"),shareButton=document.getElementById("shareButton"),loadingOverlayModal=document.getElementById("loadingOverlayModal"),loadingOverlayText=document.getElementById("loadingOverlayText"),donateButtons=document.querySelectorAll(".donate-button"),donateModal=document.getElementById("donateModal"),closeDonateModalButton=document.querySelector(".close-donate-modal-button"),qrCodeGenerated=!1,sharePreviewModal=document.getElementById("sharePreviewModal"),closeModalButton=document.querySelector(".close-modal-button"),shareCanvasPreview=document.getElementById("shareCanvasPreview"),modalShareButton=document.getElementById("modalShareButton"),modalDownloadButton=document.getElementById("modalDownloadButton"),downloadStatsButton=document.getElementById("downloadStatsButton");async function resolveTezosDomain(e){var e=e.trim(),t=e.toLowerCase();if(statusMessage.textContent=`Resolving ${e}...`,statusMessage.style.display="block",errorMessage.style.display="none",!t.endsWith(".tez"))return{success:!0,address:e,message:"Input is a direct address."};try{var o,n,a={query:`{
                        domain(name: "${t}") {
                            name
                            address
                        }
                    }`},l=await fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});return l.ok?(o=await l.json(),console.log("Tezos Domains API response for",t,":",o),o.data&&o.data.domain&&o.data.domain.address?{success:!0,address:o.data.domain.address,domainName:o.data.domain.name}:o.data&&null===o.data.domain?{success:!1,error:`Domain '${e}' not found or has no address.`}:o.errors?{success:!1,error:"API Error: "+o.errors.map(e=>e.message).join(", ")}:{success:!1,error:"Could not resolve domain. Unexpected API response."}):(n=await l.text(),console.error("Tezos Domains API request failed:",l.status,n),{success:!1,error:`API request failed with status ${l.status}.`})}catch(e){return console.error("Error during domain resolution:",e),{success:!1,error:"An unexpected error occurred during resolution: "+e.message}}}function formatIpfsUrl(e){return e&&e.startsWith("ipfs://")?"https://ipfs.io/ipfs/"+e.substring(7):e}function formatArtist(e){return e&&e.holder?e.holder.alias||(e.holder.address?(e=e.holder.address).slice(0,6)+"..."+e.slice(-4):"Unknown"):"Unknown"}function truncateAddress(e,t=5,o=5){return!e||e.length<=t+o+3?e:e.substring(0,t)+"..."+e.substring(e.length-o)}async function getDisplayNameForAddress(t){try{var e=await fetch("https://api.tzkt.io/v1/accounts/"+t);if(e.ok){var o=await e.json();if(o.alias)return o.alias}}catch(e){console.error("Error fetching account alias from TzKT for "+t,e)}try{var n={query:`{ reverseRecord(address: "${t}") { domain { name } } }`},a=await fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok){var l=await a.json();if(l.data?.reverseRecord?.domain?.name)return l.data.reverseRecord.domain.name}}catch(e){console.error("Error fetching reverse record from Tezos Domains for "+t,e)}try{var r=await fetch(`https://api.tzkt.io/v1/domains/${t}/reverse`);if(r.ok){var s=await r.text();if(s){var d=JSON.parse(s).name;if(d)return d}}}catch(e){console.error(`TzKT reverse lookup for ${t} failed`,e)}return null}function drawShareImageOnCanvas(e,t){var o=e.getContext("2d"),n=1080,a=1080;e.width=n,e.height=a,o.fillStyle="#333333",o.fillRect(0,0,n,a),o.fillStyle="#ff0476",o.font="bold 72px sans-serif",o.textAlign="center",o.fillText("My fx(hash) portfolio valuation",540,324),o.fillStyle="#03dac6",o.font="bold 120px sans-serif",o.fillText(t,540,594),o.fillStyle="#ff80bf",o.font="italic 50px sans-serif",o.fillText("via floorcheck.com",540,810)}async function fetchOwned(e){ownedLoading=!0,ownedError=null,ownedItems=[],document.getElementById("skeletonLoader").style.display="block",errorMessage.style.display="none",artworksTable.style.display="none",document.getElementById("groupedFxhashTable").style.display="none",document.getElementById("groupedFxhashStatusMessage").style.display="none",document.getElementById("groupedFxhashTableBody").innerHTML="";let t=0,o=!(document.getElementById("groupedFxhashTableFooter").innerHTML="");for(;o;)try{var n=await(await fetch("https://data.objkt.com/v3/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
              query GetUserOwnedTokens($address: String!, $limit: Int!, $offset: Int!) {
                token(
                  where: {
                    holders: {holder_address: {_eq: $address}},
                    supply: {_gt: "0"} 
                  },
                  order_by: {pk: desc},
                  limit: $limit,
                  offset: $offset
                ) {
                  pk
                  name
                  display_uri
                  artifact_uri
                  token_id
                  fa {
                    name
                    contract
                  }
                  galleries(limit: 1) { 
                    gallery {
                      gallery_id 
                      name
                      floor_price 
                    }
                  }
                  creators(limit: 1) {
                    holder {
                      address
                      alias
                    }
                  }
                }
              }`,variables:{address:e,limit:50,offset:t}})})).json();if(console.log(`Owned Tokens API Response (Offset: ${t}):`,n),n.errors)throw new Error(n.errors.map(e=>e.message).join(", "));var a,l,r=n.data.token;r&&0<r.length?(a=r.map(async e=>{var t=formatIpfsUrl(e.display_uri||e.artifact_uri);let o=null,n=null;var a,l=e.fa&&e.fa.name?e.fa.name:"",r=e.creators&&0<e.creators.length?e.creators[0]:null,s=formatArtist(r),r=r&&r.holder?r.holder.address:null,d=e.fa&&e.fa.contract?e.fa.contract:null,i=e.token_id||null;return e.galleries&&0<e.galleries.length&&e.galleries[0].gallery&&((a=e.galleries[0].gallery).gallery_id&&(o=a.gallery_id),null!=a.floor_price)&&(n=Number(a.floor_price)),{id:e.pk,title:e.name||"Untitled Token",contractName:l||"N/A",image:t||"placeholder_small_dark.jpg",galleryId:o?String(o):"N/A",galleryFloorPrice:n,artistDisplay:s,artistObjktAddress:r,faContract:d,tokenId:i}}),l=await Promise.all(a),ownedItems.push(...l),fetchButton.innerHTML=`<div class="spinner"></div>Fetched ${ownedItems.length} tokens...`,r.length<50?o=!1:(t+=50,await new Promise(e=>setTimeout(e,200)))):(o=!1,0===ownedItems.length&&(statusMessage.textContent="No owned tokens found for this user."))}catch(e){ownedError=`Error during fetch (Offset: ${t}): `+e.message,o=!1,errorMessage.textContent=ownedError,errorMessage.style.display="block",console.error("Error fetching owned tokens:",e)}finally{o}ownedLoading&&o,ownedLoading=!1,ownedError?(document.getElementById("skeletonLoader").style.display="none",artworksTable.style.display="none",document.getElementById("groupedFxhashTable").style.display="none"):(0<ownedItems.length?statusMessage.style.display="none":statusMessage.style.display="block",renderGroupedFxhashTable(groupFxhashTokensByGallery(ownedItems)),artworksTable.style.display="none")}function groupFxhashTokensByGallery(e){let t={};return e.forEach(e=>{e.contractName&&(e.contractName.toLowerCase().includes("fx(hash)")||e.contractName.toLowerCase().includes("fxhash"))&&e.galleryId&&"N/A"!==e.galleryId&&(t[e.galleryId]||(t[e.galleryId]=[]),t[e.galleryId].push(e))}),console.log("Grouped fx(hash) tokens:",t),t}function renderGroupedFxhashTable(o){let d=document.getElementById("groupedFxhashTableBody");var n=document.getElementById("groupedFxhashTable"),a=document.getElementById("groupedFxhashStatusMessage"),l=document.getElementById("groupedFxhashTableFooter");let r=document.getElementById("shareButton");var i,c,u,s=document.getElementById("downloadStatsButton");if(d.innerHTML="",l.innerHTML="",r.style.display="none",s.style.display="none",0===Object.keys(o).length)n.style.display="none",a.textContent="No fx(hash) tokens with gallery IDs found to display.",a.style.display="block";else{n.style.display="table",a.style.display="none";let e=0,t=0;console.log("--- Calculating Total Token Floor Value (Gallery Floor x Token Count) ---");for(let s in o){let l=o[s],r=(t+=l.length,l[0]);null!=r.galleryFloorPrice&&(u=(i=r.galleryFloorPrice)*(c=l.length),e+=u,console.log(`Gallery ID: ${s}, Floor: ${i/1e6} XTZ, Token Count: ${c}, Contributing to Total: ${u/1e6} XTZ`)),l.forEach((e,t)=>{var o=d.insertRow(),n=(0===t&&((t=o.insertCell()).rowSpan=l.length,t.style.verticalAlign="top",t.style.width="8%",(n=document.createElement("a")).href=`https://objkt.com/collections/fxhash/projects/${s}?ref=tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5`,n.textContent=s,n.target="_blank",n.rel="noopener noreferrer",t.appendChild(n),(t=o.insertCell()).rowSpan=l.length,t.style.verticalAlign="top",t.style.width="15%",null!=r.galleryFloorPrice?t.innerHTML=`<strong>${r.galleryFloorPrice/1e6}</strong> ꜩ`:t.textContent="N/A"),o.insertCell()),t=(e.artistObjktAddress?((t=document.createElement("a")).href=`https://objkt.com/profile/${e.artistObjktAddress}?ref=tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5`,t.textContent=e.artistDisplay,t.target="_blank",t.rel="noopener noreferrer",n.appendChild(t)):n.textContent=e.artistDisplay,n.style.verticalAlign="top",o.insertCell()),a=(showThumbnails?((n=document.createElement("img")).src=e.image,n.alt=e.title,n.onerror=function(){this.style.display="none";var e=document.createElement("span");e.textContent="No Image",this.parentElement.appendChild(e)},e.faContract&&e.tokenId?((a=document.createElement("a")).href=`https://objkt.com/tokens/${e.faContract}/${e.tokenId}?ref=tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5`,a.target="_blank",a.rel="noopener noreferrer",a.appendChild(n),t.appendChild(a)):t.appendChild(n)):t.textContent="(hidden)",o.insertCell());e.faContract&&e.tokenId?((n=document.createElement("a")).href=`https://objkt.com/tokens/${e.faContract}/${e.tokenId}?ref=tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5`,n.textContent=e.title||"Untitled",n.target="_blank",n.rel="noopener noreferrer",a.appendChild(n)):a.textContent=e.title||"Untitled",o.insertCell().textContent=e.id,o.insertCell().textContent=e.contractName||"N/A"})}console.log("---------------------------------------------------------------------");var n=e/1e6;renderPortfolioInsights(ownedItems,n),0<e||0<t?(r.style.display="block",s.style.display="block",a=r.cloneNode(!0),r.parentNode.replaceChild(a,r),(r=a).addEventListener("click",()=>{var e=`https://twitter.com/intent/tweet?text=${encodeURIComponent("Check your fx(hash) tezos collection stats!")}&url=https://from-friends.github.io/fxtez.html&via=FromFriends__&related=FromFriends__`;window.open(e,"_blank")})):(r.style.display="none",s.style.display="none"),0<Object.keys(o).length&&((a=(n=l.insertRow()).insertCell()).colSpan=2,a.textContent="Total Value:",a.style.textAlign="right",a.style.fontWeight="bold",(s=n.insertCell()).innerHTML=`<strong>${(e/1e6).toLocaleString()}</strong> ꜩ`,s.style.fontWeight="bold",s.colSpan=5,document.getElementById("endOfPageDonateSection").style.display="block")}}function renderTable(){artworksTableBody.innerHTML="";var e=ownedItems;0===e.length?ownedError||ownedLoading:e.forEach(e=>{var t,o=artworksTableBody.insertRow(),n=(o.insertCell().textContent=e.id,o.insertCell().textContent=e.title,o.insertCell().textContent=e.contractName,o.insertCell());showThumbnails&&((t=document.createElement("img")).src=e.image,t.alt=e.title,n.appendChild(t)),o.insertCell().textContent=e.galleryId})}fetchButton.addEventListener("click",async()=>{fetchButton.disabled=!0,fetchButton.classList.add("loading-state"),fetchButton.innerHTML='<div class="spinner"></div>Fetching tokens...';try{var o=addressInput.value.trim();if(o){localStorage.setItem("lastFxhashAddress",o);var n=new URL(window.location);n.searchParams.set("address",o),window.history.pushState({},"",n),resetResultsCard(),document.getElementById("endOfPageDonateSection").style.display="none",document.getElementById("groupedFxhashTableBody").innerHTML="",document.getElementById("groupedFxhashTableFooter").innerHTML="",document.getElementById("groupedFxhashTable").style.display="none",document.getElementById("groupedFxhashStatusMessage").style.display="none",errorMessage.style.display="none",statusMessage.textContent="Starting...",statusMessage.style.display="block",document.querySelector(".balance-title").innerHTML='<strong>fx(tez)</strong> × <span id="displayNameSpan"></span>';let t=document.getElementById("displayNameSpan"),e=o;var a;if(o.toLowerCase().endsWith(".tez")){var l=await resolveTezosDomain(o);if(!l.success||!l.address)return errorMessage.textContent="Failed to resolve domain: "+(l.error||"Unknown error"),errorMessage.style.display="block",void(statusMessage.style.display="none");e=l.address,a=l.domainName||o,t.textContent=a}else t.textContent=truncateAddress(e),statusMessage.textContent="",statusMessage.style.display="block";getDisplayNameForAddress(e).then(e=>{e&&(t.textContent=e)}),ownedItems=[],ownedLoading=!1,ownedError=null,document.getElementById("shareButton").style.display="none",document.getElementById("downloadStatsButton").style.display="none",await fetchOwned(e)}else errorMessage.textContent="Please enter a Tezos address or .tez domain.",errorMessage.style.display="block",statusMessage.style.display="none",artworksTable.style.display="none",document.getElementById("groupedFxhashTable").style.display="none"}finally{fetchButton.disabled=!1,fetchButton.classList.remove("loading-state"),fetchButton.innerHTML="Check now"}}),addressInput.addEventListener("input",()=>{var e;""===addressInput.value.trim()&&((e=new URL(window.location)).searchParams.delete("address"),window.history.pushState({},"",e),localStorage.removeItem("lastFxhashAddress"))}),closeModalButton&&(closeModalButton.onclick=function(){sharePreviewModal.style.display="none"}),window.onclick=function(e){e.target==sharePreviewModal&&(sharePreviewModal.style.display="none"),e.target==donateModal&&(donateModal.style.display="none")},0<donateButtons.length&&donateButtons.forEach(e=>{e.addEventListener("click",()=>{donateModal.style.display="flex",qrCodeGenerated||(new QRCode(document.getElementById("qrcode"),{text:"tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5",width:180,height:180,colorDark:"#e0e0e0",colorLight:"#121212",correctLevel:QRCode.CorrectLevel.H}),qrCodeGenerated=!0)})}),closeDonateModalButton&&closeDonateModalButton.addEventListener("click",function(){donateModal.style.display="none"});let copyBtn=document.getElementById("copyAddressBtn");function resetResultsCard(){document.getElementById("resultsTotalValue").innerHTML='<div class="skeleton" style="width: 200px; height: 38px; border-radius: 4px;"></div>',document.getElementById("resultsCollectedIterations").innerHTML='<div class="skeleton" style="width: 60px; height: 17px; border-radius: 3px;"></div>',document.getElementById("resultsTopArtist").innerHTML='<div class="skeleton" style="width: 120px; height: 17px; border-radius: 3px;"></div>',document.getElementById("resultsUniqueArtists").innerHTML='<div class="skeleton" style="width: 50px; height: 17px; border-radius: 3px;"></div>',document.getElementById("resultsMostValuable").innerHTML='<div class="skeleton" style="width: 100px; height: 17px; border-radius: 3px;"></div>'}function renderPortfolioInsights(a,l){document.getElementById("resultsTotalValue").textContent=l.toLocaleString()+" ꜩ";l=(a=a||[]).filter(e=>e.contractName&&(e.contractName.toLowerCase().includes("fx(hash)")||e.contractName.toLowerCase().includes("fxhash"))&&e.galleryId&&"N/A"!==e.galleryId);if(document.getElementById("resultsCollectedIterations").textContent=l.length,0===l.length)document.getElementById("resultsTopArtist").textContent="N/A",document.getElementById("resultsUniqueArtists").textContent="0",document.getElementById("resultsMostValuable").textContent="N/A";else{let t={};l.forEach(e=>{e=e.artistDisplay;e&&"N/A"!==e&&"Unknown"!==e&&(t[e]=(t[e]||0)+1)});a=Object.keys(t).length;let e=0,o=["N/A"];if(0<(document.getElementById("resultsUniqueArtists").textContent=a)){for(var r in o=[],t)t[r]>e?(e=t[r],o=[r]):t[r]===e&&o.push(r);document.getElementById("resultsTopArtist").textContent=o.join(", ")}else document.getElementById("resultsTopArtist").textContent="N/A";a=l.filter(e=>null!=e.galleryFloorPrice);let n=-1;0<a.length&&(a.forEach(e=>{e.galleryFloorPrice>n&&(n=e.galleryFloorPrice)}),0<=n)?document.getElementById("resultsMostValuable").textContent=(n/1e6).toLocaleString()+" ꜩ":document.getElementById("resultsMostValuable").textContent="N/A"}}function logPortfolioInsights(a){if(a&&0!==a.length){console.log("--- Portfolio Insights ---"),console.log("Total Owned Tokens (all types, fetched): "+a.length);a=a.filter(e=>e.contractName&&(e.contractName.toLowerCase().includes("fx(hash)")||e.contractName.toLowerCase().includes("fxhash"))&&e.galleryId&&"N/A"!==e.galleryId&&null!=e.galleryFloorPrice);if(0===a.length)console.log("Portfolio Insights: No fx(hash) gallery items with floor prices to analyze for further artist/value breakdown.");else{let t={},e=(a.forEach(e=>{e=e.artistObjktAddress||e.artistDisplay;e&&"N/A"!==e&&"Unknown"!==e&&(t[e]=(t[e]||0)+1)}),0),o=[];if(0<Object.keys(t).length){var l,r=Object.keys(t).length;for(l in console.log("Total Unique Artists (in fx(hash) gallery items): "+r),t)t[l]>e?(e=t[l],o=[l]):t[l]===e&&o.push(l);console.log(`Most Collected Artist(s) (from fx(hash) gallery items with ${e} token(s) each):`),o.forEach(e=>console.log("- "+e))}else console.log("Portfolio Insights: Could not determine most collected artists (no valid artist data).");let n=-1;a.forEach(e=>{e.galleryFloorPrice>n&&(n=e.galleryFloorPrice)}),0<=n?(r=a.filter(e=>e.galleryFloorPrice===n),console.log(`Highest Gallery Floor Price Found: ${n/1e6} ꜩ`),console.log("Artwork(s) from Collection(s) with this Floor Price:"),r.forEach(e=>{console.log(`- "${e.title}" (Gallery ID: ${e.galleryId}, Artist: ${e.artistDisplay})`)})):console.log("Portfolio Insights: Could not determine most valuable artworks by gallery floor (no valid floor price data).")}console.log("-------------------------")}else console.log("Portfolio Insights: No items to analyze.")}copyBtn&&copyBtn.addEventListener("click",function(){navigator.clipboard.writeText("tz1U49JkLGSUR7JFN5xFoFghNwMXnQtR7Pv5").then(function(){let e=copyBtn.textContent;copyBtn.textContent="Copied!",setTimeout(function(){copyBtn.textContent=e},2e3)}).catch(function(e){console.error("Failed to copy text: ",e)})}),modalShareButton&&modalShareButton.addEventListener("click",async()=>{let t="My fx(hash) portfolio valuation";var e=document.getElementById("resultsTotalValue").textContent||"N/A";let o=t+`: ${e}.`,n="https://floorcheck.com";navigator.share&&shareCanvasPreview.toBlob?shareCanvasPreview.toBlob(async e=>{if(e){e=new File([e],"fxhash_valuation.png",{type:"image/png"});try{await navigator.share({files:[e],title:t,text:o,url:n}),console.log("Image shared successfully!")}catch(e){console.error("Error sharing image:",e);try{await navigator.share({title:t,text:o,url:n})}catch(e){navigator.clipboard.writeText(o+" "+n).then(()=>alert("Valuation info copied to clipboard! (Image share failed)")).catch(e=>console.error("Failed to copy to clipboard:",e))}}}else try{await navigator.share({title:t,text:o,url:n})}catch(e){navigator.clipboard.writeText(o+" "+n).then(()=>alert("Valuation info copied to clipboard! (Image generation failed)")).catch(e=>console.error("Failed to copy to clipboard:",e))}},"image/png"):navigator.clipboard.writeText(o+" "+n).then(()=>alert("Valuation info copied to clipboard! (Sharing not fully supported)")).catch(e=>console.error("Failed to copy to clipboard:",e))}),modalDownloadButton&&modalDownloadButton.addEventListener("click",()=>{var e=document.getElementById("resultsTotalValue").textContent||"0 ꜩ",e=(drawShareImageOnCanvas(shareCanvasPreview,e),shareCanvasPreview.toDataURL("image/png")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","fxhash_portfolio_valuation.png"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}),demoLink&&demoLink.addEventListener("click",e=>{e.preventDefault(),addressInput.value="tz1PoDdN2oyRyF6DA73zTWAWYhNL4UGr3Egj",fetchButton.click()}),(()=>{var e=new URLSearchParams(window.location.search).get("address");e?(addressInput.value=decodeURIComponent(e),setTimeout(()=>fetchButton.click(),100)):(e=localStorage.getItem("lastFxhashAddress"))&&(addressInput.value=e)})(),downloadStatsButton&&downloadStatsButton.addEventListener("click",()=>{var e=document.querySelector(".widget-container");html2canvas(e,{backgroundColor:"#121212",useCORS:!0,scale:4}).then(e=>{var e=e.toDataURL("image/png"),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","fxtez-stats.png"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)})})</script><footer class="footer"><img src="fromfriends.svg"alt="From Friends Logo"class="footer-image"><div class="footer-sections"><div class="footer-section"><h3>Tezos Tools</h3><ul class="footer-links"><li><a href="https://from-friends.github.io/teztracker.html"target="_blank"rel="noopener noreferrer">TezTracker</a><li><a href="https://from-friends.github.io/"target="_blank"rel="noopener noreferrer">FrameToGo</a><li><a href="https://tiktoktezos.netlify.app/"target="_blank"rel="noopener noreferrer">TikTok for Tezos</a></ul></div><div class="footer-section"><h3>Contact FromFriends</h3><ul class="footer-links"><li><a href="https://x.com/FromFriends__"target="_blank"rel="noopener noreferrer">Follow on X</a><li><a href="mailto:heyfromfriends@gmail.com">Email</a><li><a href="https://from-friends.github.io/"target="_blank"rel="noopener noreferrer">Website</a></ul></div></div></footer>